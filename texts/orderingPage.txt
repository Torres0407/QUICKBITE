     
 // Initialize Supabase
const SUPABASE_URL = 'https://pwqcgvbnpewyzphoxpym.supabase.co';
const SUPABASE_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InB3cWNndmJucGV3eXpwaG94cHltIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk2MzM4NjAsImV4cCI6MjA2NTIwOTg2MH0.JZzL8_hK2cqoJTAE3qU0Srf2mporbGrVLlaHWxMjDtc'; // Your full key
const { createClient } = supabase;
const supabaseClient = createClient(SUPABASE_URL, SUPABASE_KEY);

document.addEventListener('DOMContentLoaded', async () => {
  const userNameElement = document.getElementById('user-name');
  const userAvatarElement = document.getElementById('user-avatar');

  try {
    const { data, error } = await supabaseClient.auth.getUser();

    if (error || !data?.user) {
      console.log("No user found or not logged in");
      return;
    }

    const user = data.user;
    const username = user.user_metadata?.name || "User";

    // Update DOM
    userNameElement.textContent = username;

    // Create avatar initials
    const initials = username
      .split(' ')
      .map(name => name[0])
      .join('')
      .toUpperCase()
      .slice(0, 2); // First 2 letters max

    userAvatarElement.textContent = initials;

  } catch (err) {
    console.error("Error fetching user info:", err);
  }
});

 document.addEventListener('DOMContentLoaded', function() {
      
      setInterval(updateCardData, 5000);
      
      
      document.querySelectorAll('.order-action').forEach(action => {
        action.addEventListener('click', function() {
          const orderId = this.parentNode.querySelector('td').textContent;
          alert(`Viewing details for order ${orderId}`);
        });
      });
      
      
      document.querySelector('.withdraw-btn').addEventListener('click', function() {
        alert('Withdrawal request initiated. Funds will be processed within 24 hours.');
      });
      
      
      document.querySelector('.upgrade').addEventListener('click', function() {
        alert('Redirecting to upgrade options...');
      });
      
      
      document.querySelector('.user-profile').addEventListener('click', function() {
        alert('Showing user profile menu...');
      });
      
      
      updateCardData();
    });
    
    function updateCardData() {
     
      const cards = document.querySelectorAll('.card:not(:last-child)');
      
      cards.forEach(card => {
        const valueElement = card.querySelector('.value');
        const trendElement = card.querySelector('.trend');
        let currentValue = parseFloat(valueElement.textContent.replace(/[^0-9.]/g, ''));
        
        
        const changePercent = (Math.random() * 10 - 5);
        const newValue = currentValue * (1 + changePercent/100);
        
       
        if (valueElement.textContent.includes('₦')) {
          valueElement.textContent = '₦' + newValue.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g, ",");
        } else {
          valueElement.textContent = Math.round(newValue);
        }
        
        
        if (changePercent >= 0) {
          trendElement.innerHTML = `<i class="fas fa-arrow-up"></i> ${Math.abs(changePercent).toFixed(1)}% from last update`;
          trendElement.className = 'trend up';
        } else {
          trendElement.innerHTML = `<i class="fas fa-arrow-down"></i> ${Math.abs(changePercent).toFixed(1)}% from last update`;
          trendElement.className = 'trend down';
        }
      });
    }